<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vite + Vue</title>
  <link rel="preload" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <script src="https://cdn.shopify.com/s/files/1/0583/5810/4213/files/8-swiper-bundle.min.js?v=1663912984"> </script>
  <script src="https://cdn.shopify.com/s/files/1/0583/5810/4213/files/1.14.2-TweenMax.js?v=1663912518"></script>
  <script src="https://cdn.shopify.com/s/files/1/0583/5810/4213/files/1.9.1-jquery.min.js?v=1663911504"></script>
  <script src="https://cdn.jsdelivr.net/gh/StephanWagner/jBox@v1.3.3/dist/jBox.all.min.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/StephanWagner/jBox@v1.3.3/dist/jBox.all.min.css" rel="stylesheet">
</head>
<style>
  body {
    font-family: Urbane;
    margin: 0;
  }

  div {
    box-sizing: border-box;
  }

  img {
      width: 100%;
      height: auto;
  }
</style>

<body>
  <div id="app"></div>
  <script type="module" src="/src/main.js"></script>
  <div id="myModal">Click me to open a modal window!</div>
</body>
<script>
  let temp = `“It's incredibly fun to ride”`

  function moveTop(text, target) {
    const active = target.getAttribute('active')

    if (active !== null) {
      return
    }

    const current = document.querySelector('#section1 .logos img[active]')

    current.removeAttribute('active')
    target.setAttribute('active', '')

    const texts = document.querySelector('#section1 .texts')
    texts.innerHTML = `
                          <div class="toBottom">${temp}</div>
                          <div class="toTop">${text}</div>
                        `

    temp = text
  }
</script>
<script>
  function changeBike(gotoUrl, imgUrl, target) {
    const parent = target.parentNode

    const active = parent.querySelector('.active')

    active.className = ''
    target.className = 'active'

    const img = parent.parentNode.querySelector('img')
    img.src = imgUrl

    // 新增的代码
    const a = parent.parentNode.querySelector('a')
    a.href = gotoUrl
  }
</script>



<script>
  setTimeout(() => {
    $('.faq-title').click(function () {
      $(this)
        .siblings('.faq-content')
        .slideToggle()
        .parent()
        .siblings()
        .find('.faq-content')
        .slideUp();
      $(this).children('i').toggleClass('faq-content-plus');
      $(this)
        .parent()
        .siblings()
        .find('.faq-title')
        .children('i')
        .addClass('faq-content-plus');
    });
  }, 300)
</script>
<!-- <script src="https://cdn.jsdelivr.net/npm/ip-geolocation-api-jquery-sdk@1.1.0/ipgeolocation.min.js"></script>

<script>
    // On call to IPGeolocation API on each page during a user's visit, API response will be served from sessionStorage after the first page.
    _ipgeolocation.enableSessionStorage(true);

    var ip = sessionStorage.getItem("ip");
    var country_name = sessionStorage.getItem("country_name");
    var country_code2 = sessionStorage.getItem("country_code2");
            
    if (!ip || !country_name || !country_code2) {
        _ipgeolocation.makeAsyncCallsToAPI(true);
        // _ipgeolocation.setFields("country_name,country_code2");
        _ipgeolocation.getGeolocation(handleResponse, "661e242aa9684868a4af9d9accc6e915");
    }

    function handleResponse(json) {
      console.log(json)

        ip = json.ip;
        country_name = json.country_name;
        country_code2 = json.country_code2;
    }
                
</script> -->
<script>
const testRides = [
  {
    city: 'Frankfurt am Main',
    cityBackground: 'https://cdn.shopify.com/s/files/1/0633/2068/6808/files/testrideshopimg-Frankfurt.jpg',
    stores: [
      {
        name: 'TP',
        phone: '+0049 1741 767140',
        email: 'yicxie2017@gmail.com',
        timezone: "Mainz, Germany (GMT+1)",
        add: "Am Sonnigen Hang 21 55127 Mainz Germany",
        imgUrl: "https://cdn.shopify.com/s/files/1/0633/2068/6808/files/testrideshopimg-Frankfurt.jpg?v=1667370876",
        testrideSpot: "Frankfurt",
        testRideSize: "M/L",
        businessHours: [
          "09:00–19:00",
          "09:00–19:00",
          "09:00–19:00",
          "09:00–19:00",
          "",
          "09:00–19:00",
          "09:00–19:00",
        ],
      },
      {
        name: 'Service Zentrum',
        phone: '+004961032076414',
        email: 'yiming.song@iedau.com',
        timezone: "Mainz, Germany (GMT+1)",
        add: "IED Fulfillment-Service GmbH c/o Urtopia Service Otto-Hahn-Str. 5-7 63225 Langen",
        imgUrl: "https://cdn.shopify.com/s/files/1/0633/2068/6808/files/testrideshopimg-Frankfurt.jpg?v=1667370876",
        testrideSpot: "Frankfurt",
        testRideSize: "",
        businessHours: [
          "09:00–19:00",
          "09:00–19:00",
          "09:00–19:00",
          "09:00–19:00",
          "",
          "09:00–19:00",
          "09:00–19:00",
        ],
      },
      {
        name: 'mein-fahrradhaendler',
        phone: '+00496101 9951561',
        email: 'yicxie2017@gmail.com',
        timezone: "Mainz, Germany (GMT+1)",
        add: "Alt Erlenbach 35, 60437 Frankfurt/Main",
        imgUrl: "https://cdn.shopify.com/s/files/1/0633/2068/6808/files/testrideshopimg-Frankfurt.jpg?v=1667370876",
        testrideSpot: "Frankfurt",
        testRideSize: "L",
        businessHours: [
          "09:00–19:00",
          "09:00–19:00",
          "09:00–19:00",
          "09:00–19:00",
          "",
          "09:00–19:00",
          "09:00–19:00",
        ],
      }
    ]
  }
]


const createContent = city => {
    const find = testRides.find(c => c.city === city)

    console.log(find)

    if (!find) {
        return
    }

    return `<div class="store-list">
            <div class="list">
                ${find.stores.map(store => `<div class="item">
                    <div class="u30DemiBold">${store.name}</div>
                    <div class="u20DemiBold">Available Model:</div>
                    <ul>
                        <li class="u20Medium">Carbon One Size ${store.testRideSize}</li>
                    </ul>
                    <div class="u20DemiBold">ADD:</div>
                    <div class="u20Medium address">${store.add}</div>
                    <div class="my-button my-button-black">Select</div>
                </div>`)}
            </div>
            <div id="storepoint-container" data-tags="de,Test Ride,${city}" data-map-id="162f21804990ff"></div>
        </div>
        `
}

const width = document.body.clientWidth
    const isMobile = width < 768
    new jBox('Modal', {
        width: isMobile ? 'calc(100vw - 30px)' : 1000,
        height: 'auto',
        title: 'Book a Test Ride',
        closeButton: 'title',
        onCreated: function () {
        },
    }).setContent(createContent('Frankfurt am Main')).open()
</script>
</html>